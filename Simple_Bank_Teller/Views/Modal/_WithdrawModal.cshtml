@model Simple_Bank_Teller.Controllers.Models.DashboardModel

<div class="modal fade" id="withdrawModal" tabindex="-1" aria-labelledby="withdrawModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="withdrawModalLabel">Withdraw Funds</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form class="transaction-form" data-transaction-type="2">
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <p class="text-muted mb-1">Withdrawing from account</p>
                        <h4 class="fw-bold text-danger">
                            ****-***@Model.UserAccount.AccountNo.ToString().PadLeft(10, '0').Substring(8)
                        </h4>
                    </div>
                    @functions {
                        string ToPeso(string value)
                        {
                            if (string.IsNullOrWhiteSpace(value)) return "0.00";
                            return decimal.TryParse(value, out decimal amount) ? amount.ToString("N2") : "0.00";
                        }
                    }
                    <div class="mb-3">
                        <label class="form-label fw-bold">Amount (PHP)</label>
                        <input type="number" class="form-control form-control-lg text-center"
                               id="withdrawAmount" name="amount" min="100" step="0.01"
                               placeholder="0.00" required />
                        <div class="form-text text-danger">
                            Available: PHP @ToPeso(Model.TransactionValue.CurrentBal)
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger">Withdraw Now</button>
                </div>
            </form>
        </div>
    </div>
</div>